# VisGadget:https://github.com/mx927/VisGadget
## 时间：2019/01/10

### 进度
- **`VisGadget`**：
> - **+新增：** 插件初始化
> - **+新增：** 面板基础操作(最小化,拖拽,边缘停靠)
> - **+新增：** 添加自定义按钮

### TODO
1. 自定义按钮图标统一
2. 自定义按钮图标颜色更换接口
3. 通过工具栏进行各类图形绘制

### 问题

##### 1. 参数设置


---

## 时间：2019/01/14

### 进度
- **`VisGadget`**：
> - 插件初始化
> - 面板基础操作(最小化,拖拽,边缘停靠)
> - 添加自定义按钮
> - **+新增：** 默认按钮图标统一(SVG格式)，可通过接口切换图标颜色
> - **+新增：** 完成`CanvasObject`类，该类最终会包括canvas画布应有的所有职能
> - **+新增：** 完成`ShapeObject`类，该类最终会包括单个图形应有的所有职能
- **`CanvasObject`**：
> - **+新增：** 初始化时,针对SVG窗口进行尺寸适配
> - **+新增：** 通过切换状态来解决解决Canvas画布与SVG窗口中鼠标事件的冲突
> - **+新增：** 支持同时指定多个SVG窗口
> - **+新增：** 初始化Canvas画布,对SVG窗口尺寸进行适配
> - **+新增：** 矩形绘制功能: 依据SVG属性进行绘制(**模拟**)

- **`ShapeObject`**：
> - **+新增：** 初始化时，通过类型设置不同的初值
> - **+新增：** 使用链式调用进行属性操作
> - **+新增：** 矩形初始化(包括了SVG元素的所有样式)

### TODO
1. 代码解耦。
2. `CanvasObject`实现`circle`、`ellipse`的绘制功能(**依照SVG格式**)
3. `ShapeObject`实现`rect`、`circle`、`ellipse`这三类SVG元素的克隆功能(**将现有SVG元素转换成`CanvasObject`绘制需要的数据类型，便于canvas模拟SVG元素**)
4. `ShapeObject`实现针对`rect`、`circle`、`ellipse`这三类SVG元素的边缘检测，以便于后期SVG选择器的实现。

### 问题

##### 1. 圆角矩形的模拟
##### 2. 代码结构优化

---
## 时间：2019/01/17

### 进度
- **`VisGadget`**：
> - 插件初始化
> - 面板基础操作(最小化,拖拽,边缘停靠)
> - 添加自定义按钮
> - 默认按钮图标统一(SVG格式)，可通过接口切换图标颜色
> - `CanvasObject`类，该类最终会包括canvas画布应有的所有职能
> - `ShapeObject`类，该类最终会包括单个图形应有的所有职能
> - **⚪更改：** 在开发阶段，将该类放入单独的JS文件进行开发，采用Class包装。
> - **⚪更改：** 将`CanvasObject`类改为`Monitor`类，每个实例负责监听SVG窗口，不再进行Canvas底层相关包装，将该部分由Zrender.js实现。
> - **⚪更改：** 取消`ShapeObject`类，将原有职能移交给`Monitor`。
- **`Monitor`**：
> - 初始化时,针对SVG窗口进行尺寸适配
> - 通过切换状态来决解决解决Canvas画布与SVG窗口中鼠标事件的响应
> - 支持同时指定多个SVG窗口
> - 初始化Canvas画布,对SVG窗口尺寸进行适配
> - 矩形绘制功能: 依据SVG属性进行绘制(**模拟**)
> - **⚪更改：** 在开发阶段，将该类放入单独的JS文件进行开发，采用Class包装。
> - **⚪更改：** 引入ZRender.js，将图形相关操作托管交给Zrender。自身的职能改为针对一个SVG元素全部监听。
> - **+新增：** 实现`circle`、`ellipse`的绘制功能(**依照SVG格式**)
> - **+新增：** 实现对现有`circle`、`path`两类SVG元素的克隆功能(**相同位置、样式的Canvas元素**)
> - **+新增：** 实现`矩形选择`、`椭圆选择`两类选择功能的绘图部分
> - **+新增：** 完成`circle`、`path`两类元素的区域检测，现在可用`矩形选择`、`椭圆选择`两种方式选择`circle`、`path`元素， 并添加标记。



### TODO

1. `Monitor`: 完成剩余几种选择功能(套索、直线、多边形、曲线)。
2. `VisGadget`: 以合适方式来添加回调函数。

### 问题

##### 1. `Monitor`中选择合适的数据结构来存储用户标记的每个元素，为后面的图层功能(参考Photoshop)做好准备。
主要考虑方面有: 
- 一对多(一个SVG元素可能有多个标记)
- 回调(标记上可能有鼠标事件)
- 重复标记检测的效率(若已经选择1万个节点，再标记一个新节点，可能需要遍历这1万个节点进行查重)
- 用户以某种形式可以直接检索到标记以及被标记的对象，并对其进行操作
